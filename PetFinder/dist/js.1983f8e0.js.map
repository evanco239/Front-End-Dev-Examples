{"version":3,"sources":["js/validate.js","js/index.js"],"names":["isValidZip","zip","test","alertMessage","message","className","div","document","createElement","textContent","querySelector","insertBefore","setTimeout","remove","petFrom","results","pageElement","data","currentPage","updatePage","e","path","innerText","fetchAnimals","preventDefault","animal","value","zipCode","request","XMLHttpRequest","open","setRequestHeader","onload","status","displayAnimals","JSON","parse","response","animals","displayPages","pagination","console","log","send","output","forEach","name","age","gender","size","contact","email","url","photos","small","description","innerHTML","pages","current_page","_links","previous","href","next","addEventListener"],"mappings":";AAaC,aAbM,SAASA,EAAWC,GAChB,MAAA,mBAAmBC,KAAKD,GAI5B,SAASE,EAAaC,EAASC,GAC5BC,IAAAA,EAAMC,SAASC,cAAc,OACnCF,EAAID,UAA2BA,eAAAA,OAAAA,GAC/BC,EAAIG,YAAcL,EAClBG,SAASG,cAAc,cAAcC,aAAaL,EAAKC,SAASG,cAAc,cAC9EE,WAAW,WACPN,EAAIO,UACL,KACN,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAAA,QAAA,aAAA;;ACuGA,aApHD,IAAA,EAAA,QAAA,iBAEMC,EAAUP,SAASG,cAAc,aACjCK,EAAUR,SAASG,cAAc,YACjCM,EAAcT,SAASG,cAAc,SAEvCO,EAAO,GACPC,EAAc,EAOlB,SAASC,EAAWC,GAEdA,GADwB,SAAxBA,EAAEC,KAAK,GAAGC,WAAsBJ,IACR,SAAxBE,EAAEC,KAAK,GAAGC,UAAsB,CAC9BJ,GAAgB,IAAhBA,EACF,OAEAA,IAGJK,EAAaH,GAIf,SAASG,EAAaH,GACpBA,EAAEI,iBAEIC,IAAAA,EAASlB,SAASG,cAAc,WAAWgB,MAC3CC,EAAUpB,SAASG,cAAc,QAAQgB,MAG3C,IAAC,EAAWC,EAAAA,YAAAA,GAAZ,CAOAC,IAAAA,EAAU,IAAIC,eAClBD,EAAQE,KACN,MAC6CL,6CAAAA,OAAAA,EAAmBE,cAAAA,OAAAA,EAAgBT,UAAAA,OAAAA,IAChF,GAEFU,EAAQG,iBACN,gBACA,qyBAIFH,EAAQI,OAAS,WACK,MAAhB,KAAKC,QAEPC,GADAjB,EAAOkB,KAAKC,MAAM,KAAKC,WACHC,SACpBC,EAAatB,EAAKuB,aAElBC,QAAQC,IAAI,KAAKT,SAGrBL,EAAQe,YA1BO,EAAA,EAAA,cAAA,mCAAoC,UA6BrD,SAAST,EAAeI,GACtBG,QAAQC,IAAIJ,GACRM,IAAAA,EAAS,GACbN,EAAQO,QAAQ,SAAApB,GACdmB,GAKsBnB,sNAAAA,OAAAA,EAAOqB,KACJrB,MAAAA,OAAAA,EAAOsB,IAIVtB,8JAAAA,OAAAA,EAAOuB,OAE2BvB,qEAAAA,OAAAA,EAAOwB,KAEzCxB,+DAAAA,OAAAA,EAAOyB,QAAQC,MAAoB1B,YAAAA,OAAAA,EAAOyB,QAAQC,OAAU,GAMpD1B,uPAAAA,OAAAA,EAAO2B,IACf3B,oFAAAA,OAAAA,EAAO4B,OAAO,GACV5B,EAAO4B,OAAO,GAAGC,MACjB,uFAGJ7B,2EAAAA,OAAAA,EAAO8B,YAAc9B,EAAO8B,YAAgC9B,kBAAAA,OAAAA,EAAOqB,KAA0BrB,uBAAAA,OAAkB,WAAlBA,EAAOuB,OAAsB,MAAQ,KA1BlJ,WAAN,4FAiCFjC,EAAQyC,UAAYZ,EAKtB,SAASL,EAAakB,GACpBhB,QAAQC,IAAIe,GAERb,IAAAA,EACiDa,0DAAAA,OAAuB,IAAvBA,EAAMC,aAAqB,IAAkCD,4BAAAA,OAAAA,EAAME,OAAOC,SAASC,MAChFJ,6EAAAA,OAAAA,EAAMC,aACgBD,6FAAAA,OAAAA,EAAME,OAAOG,KAAKD,KAHhG,uBAKA7C,EAAYwC,UAAYZ,EAzG1B9B,EAAQiD,iBAAiB,SAAUxC,GAEnCP,EAAY+C,iBAAiB,QAAS5C","file":"js.1983f8e0.js","sourceRoot":"..","sourcesContent":["export function isValidZip(zip) {\n    return /^\\d{5}(-\\d{4})?$/.test(zip);\n}\n\n//display alert message\nexport function alertMessage(message, className) {\n    const div = document.createElement('div');\n    div.className = `alert alert-${className}`;\n    div.textContent = message;\n    document.querySelector('.container').insertBefore(div, document.querySelector('#pet-form'));\n    setTimeout(() => {\n        div.remove();\n    }, 3000)\n}","import { isValidZip, alertMessage } from \"./validate.js\";\n\nconst petFrom = document.querySelector(\"#pet-form\");\nconst results = document.querySelector(\"#results\");\nconst pageElement = document.querySelector('#page');\n\nlet data = \"\";\nlet currentPage = 1;\n\n//initial event listener for page 1 query\npetFrom.addEventListener(\"submit\", fetchAnimals);\n//add event listener to update pages\npageElement.addEventListener('click', updatePage);\n\nfunction updatePage(e) {\n  if (e.path[0].innerText === 'Next') currentPage++;\n  if (e.path[0].innerText === 'Prev') {\n    if (currentPage === 1) {\n      return\n    } else {\n      currentPage--;\n    }\n  }\n  fetchAnimals(e);\n}\n\n//fetch animals from API\nfunction fetchAnimals(e) {\n  e.preventDefault();\n  //get user input\n  const animal = document.querySelector(\"#animal\").value;\n  const zipCode = document.querySelector(\"#zip\").value;\n\n  //validate zipcode\n  if (!isValidZip(zipCode)) {\n    // called with {message, classname}\n    alertMessage('Please Enter a Valid Zip Code...', 'danger');\n    return;\n  }\n\n  // using http request with custom header in command line to pull Oauth token for 60 minute use\n  let request = new XMLHttpRequest();\n  request.open(\n    \"GET\",\n    `https://api.petfinder.com/v2/animals?type=${animal}&location=${zipCode}&page=${currentPage}`,\n    true\n  );\n  request.setRequestHeader(\n    \"Authorization\",\n    \"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6IjMzNTE1NGMyMTQ1NWQxNWExN2Y1MmE4NDFhMDlmM2EyMjFlZTYxODJmN2E4MWRiYzlkOWJiOTAwODI0YWI1YjE3NzQzNTQyNjg3ZTlkNjVjIn0.eyJhdWQiOiI5R2toZzNhVjdKU04wVkI1NFBmZkduVzhCdnBHUlIzUVpHajgybVFqNGFRV0JWQzFQSSIsImp0aSI6IjMzNTE1NGMyMTQ1NWQxNWExN2Y1MmE4NDFhMDlmM2EyMjFlZTYxODJmN2E4MWRiYzlkOWJiOTAwODI0YWI1YjE3NzQzNTQyNjg3ZTlkNjVjIiwiaWF0IjoxNTUzMDk0ODkyLCJuYmYiOjE1NTMwOTQ4OTIsImV4cCI6MTU1MzA5ODQ5Miwic3ViIjoiIiwic2NvcGVzIjpbXX0.l3FLwFD8EfYHFwNpRJwhMz_V6GZuTMcO1HOv07nJCIGPCHKGgVMseBnuOvphTp4A1t6Iyr9JgeaTqU1iAXybcKF9BFcg2Gk8v-NcT3FAohI3bo0IfFzU_4xTnRXVw3cho5outm4ogaTeDtBwqIWmpvuZLF0o6f4CkOyPqZOjSL7QbhcPJOtgOXJ_gKeVA_wM5oDgKzht0-OogRjn600sXkLGpioeQf4htUW0IT5gK5PuafsSzFS1jWgKjSqBpBo8YunHUZk55KeaqcHjBawPE5wEW6CTQQ6XzGm_Gn9PJZ50PgmgXrxH3dMbATckbQym0CHkqeT8iK0waK0ZiaFF2w\"\n  );\n  //on successful load. call a display function that will give the cards that we want\n  // by iterating through all the animals in the array\n  request.onload = function() {\n    if (this.status === 200) {\n      data = JSON.parse(this.response);\n      displayAnimals(data.animals);\n      displayPages(data.pagination)\n    } else {\n      console.log(this.status);\n    }\n  };\n  request.send();\n}\n\nfunction displayAnimals(animals) {\n  console.log(animals);\n  let output = \"\";\n  animals.forEach(animal => {\n    output += `\n            <div class=\"card col-md-10 mx-auto mb-3 pt-3\">\n                <div class=\"row\">\n                    <div class=\"col-md-6\" >\n                        <h3 class=\"card-header\" style=\"width: 25rem\">${\n                          animal.name\n                        } (${animal.age})</h3>\n                    \n                    <ul class=\"list-group list-group-flush \" >\n                        <li class=\"list-group-item\">Gender: ${\n                          animal.gender\n                        }</li>\n                        <li class=\"list-group-item\">Size: ${animal.size}</li>\n                        <li class=\"list-group-item\">${\n                          animal.contact.email ? `Contact: ${animal.contact.email}` : ''\n                        }</li>\n                    </ul>\n                    </div>\n                    <div class=\"card-body col-md-6 text-center\">\n                        <p class=\"card-text small\">Click me to find more out!</p>\n                        <a href=${animal.url}><img class=\"img-fluid rounded-circle\" style=\"width: 100px; height: 100px\" src=\"${\n                          animal.photos[0]\n                            ? animal.photos[0].small\n                            : \"https://i.ebayimg.com/00/s/NDUzWDQ1Mw==/z/IvoAAOSwImRYI8kX/$_1.JPG?set_id=8800005007\"\n                        }\" alt=\"animal\"></a>\n                        <p class=\"card-text mx-4\">${\n                          animal.description ? animal.description : `Come by to see ${animal.name} and find out what ${animal.gender === 'Female' ? 'she' : 'he'} likes!`\n                        }</p>\n                    </div>\n                </div>\n            </div>\n        `;\n  });\n  results.innerHTML = output;\n}\n\n\n//display pages\nfunction displayPages(pages) {\n  console.log(pages);\n  //get ul element from DOM and insert list items\n  let output = `\n    <li class=\"page-item\"><a class=\"page-link\" href=\"${pages.current_page === 1 ? '#' : `https://api.petfinder.com${pages._links.previous.href}`}\">Prev</a></li>\n    <li class=\"page-item\"><a class=\"page-link\" href=\"#\">${pages.current_page}</a></li>\n    <li class=\"page-item\"><a class=\"page-link\" href=\"https://api.petfinder.com${pages._links.next.href}\">Next</a></li>\n  `\n  pageElement.innerHTML = output;\n}\n"]}